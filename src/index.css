@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* 主题变量定义 */
:root {
  /* 默认主题 */
  --bg-color: #f9fafb;
  --header-bg: #ffffff;
  --text-color: #1f2937;
  --border-color: #e5e7eb;
  --panel-bg: #ffffff;
  --panel-header-bg: #f3f4f6;
  --button-bg: #ffffff;
  --button-hover-bg: #f3f4f6;
  --button-text: #374151;
  --button-primary-bg: #3b82f6;
  --button-primary-hover-bg: #2563eb;
  --button-primary-text: #ffffff;
  --button-secondary-bg: #6b7280;
  --button-secondary-hover-bg: #4b5563;
  --button-secondary-text: #ffffff;
  --input-border: #d1d5db;
  --input-focus-border: #3b82f6;
  --message-user-bg: #3b82f6;
  --message-user-text: #ffffff;
  --message-assistant-bg: #f3f4f6;
  --message-assistant-text: #1f2937;
  --preview-bg: #ffffff;
  --editor-bg: #ffffff;
  --ai-panel-bg: #ffffff;
}

/* 深色主题 */
[data-theme="dark"] {
  --bg-color: #0f172a;
  --header-bg: #1e293b;
  --text-color: #f1f5f9;
  --border-color: #475569; /* 调整深色主题下的边框颜色，使其更加明显 */
  --panel-bg: #1e293b;
  --panel-header-bg: #334155;
  --button-bg: #334155;
  --button-hover-bg: #475569;
  --button-text: #f1f5f9;
  --button-primary-bg: #3b82f6;
  --button-primary-hover-bg: #2563eb;
  --button-primary-text: #ffffff;
  --button-secondary-bg: #64748b;
  --button-secondary-hover-bg: #475569;
  --button-secondary-text: #ffffff;
  --input-border: #475569;
  --input-focus-border: #60a5fa;
  --message-user-bg: #3b82f6;
  --message-user-text: #ffffff;
  --message-assistant-bg: #334155;
  --message-assistant-text: #f1f5f9;
  --preview-bg: #0f172a;
  --editor-bg: #1e293b;
  --ai-panel-bg: #1e293b;
}

/* 深色主题下的下拉选项样式 */
[data-theme="dark"] select {
  background-color: #334155;
  color: #f1f5f9;
  border-color: #475569;
}

[data-theme="dark"] select:hover {
  background-color: #475569;
}

[data-theme="dark"] select:focus {
  background-color: #334155;
  border-color: #60a5fa;
}

[data-theme="dark"] option {
  background-color: #1e293b;
  color: #f1f5f9;
}

[data-theme="dark"] option:checked {
  background-color: #334155;
  color: #f1f5f9;
}

/* Monaco Editor风格滚动条样式 */
::-webkit-scrollbar {
  width: 14px;
  height: 14px;
}

::-webkit-scrollbar-thumb {
  background: rgba(100, 100, 100, 0);
  border-radius: 10px;
  border: 3px solid transparent;
  background-clip: padding-box;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(100, 100, 100, 0.7);
  border: 3px solid transparent;
  background-clip: padding-box;
}

::-webkit-scrollbar-corner {
  background: transparent;
}

/* Firefox滚动条样式 */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(100, 100, 100, 0) transparent;
}

/* 编辑器滚动条样式 - Monaco Editor风格 */
.monaco-editor .overflow-guard::-webkit-scrollbar {
  width: 14px;
  height: 14px;
}

.monaco-editor .overflow-guard::-webkit-scrollbar-thumb {
  background: rgba(100, 100, 100, 0);
  border-radius: 10px;
  border: 3px solid transparent;
  background-clip: padding-box;
}

.monaco-editor .overflow-guard::-webkit-scrollbar-thumb:hover {
  background: rgba(100, 100, 100, 0.7);
  border: 3px solid transparent;
  background-clip: padding-box;
}

.monaco-editor .overflow-guard::-webkit-scrollbar-corner {
  background: transparent;
}

/* 浅色主题编辑器滚动条 */
[data-theme="light"] .monaco-editor .overflow-guard::-webkit-scrollbar-thumb {
  background: rgba(100, 100, 100, 0);
}

[data-theme="light"] .monaco-editor .overflow-guard::-webkit-scrollbar-thumb:hover {
  background: rgba(100, 100, 100, 0.7);
}

/* 深色主题编辑器滚动条 */
[data-theme="dark"] .monaco-editor .overflow-guard::-webkit-scrollbar-thumb {
  background: rgba(100, 100, 100, 0);
}

[data-theme="dark"] .monaco-editor .overflow-guard::-webkit-scrollbar-thumb:hover {
  background: rgba(100, 100, 100, 0.7);
}

/* 护眼主题编辑器滚动条 */
[data-theme="eye-protect"] .monaco-editor .overflow-guard::-webkit-scrollbar-thumb {
  background: rgba(100, 100, 100, 0);
}

[data-theme="eye-protect"] .monaco-editor .overflow-guard::-webkit-scrollbar-thumb:hover {
  background: rgba(100, 100, 100, 0.7);
}

/* 浅色主题滚动条 */
[data-theme="light"] ::-webkit-scrollbar {
  width: 14px;
  height: 14px;
}

[data-theme="light"] ::-webkit-scrollbar-thumb {
  background: rgba(100, 100, 100, 0);
  border-radius: 10px;
  border: 3px solid transparent;
  background-clip: padding-box;
}

[data-theme="light"] ::-webkit-scrollbar-thumb:hover {
  background: rgba(100, 100, 100, 0.7);
  border: 3px solid transparent;
  background-clip: padding-box;
}

/* 深色主题滚动条 */
[data-theme="dark"] ::-webkit-scrollbar {
  width: 14px;
  height: 14px;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
  background: rgba(100, 100, 100, 0);
  border-radius: 10px;
  border: 3px solid transparent;
  background-clip: padding-box;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
  background: rgba(100, 100, 100, 0.7);
  border: 3px solid transparent;
  background-clip: padding-box;
}

/* 护眼主题滚动条 */
[data-theme="eye-protect"] ::-webkit-scrollbar {
  width: 14px;
  height: 14px;
}

[data-theme="eye-protect"] ::-webkit-scrollbar-thumb {
  background: rgba(100, 100, 100, 0);
  border-radius: 10px;
  border: 3px solid transparent;
  background-clip: padding-box;
}

[data-theme="eye-protect"] ::-webkit-scrollbar-thumb:hover {
  background: rgba(100, 100, 100, 0.7);
  border: 3px solid transparent;
  background-clip: padding-box;
}

/* 强制覆盖浏览器默认样式 */
[data-theme="dark"] select::-webkit-scrollbar {
  width: 14px;
  height: 14px;
}

[data-theme="dark"] select::-webkit-scrollbar-thumb {
  background: rgba(100, 100, 100, 0);
  border-radius: 10px;
  border: 3px solid transparent;
  background-clip: padding-box;
}

[data-theme="dark"] select::-webkit-scrollbar-thumb:hover {
  background: rgba(100, 100, 100, 0.7);
  border: 3px solid transparent;
  background-clip: padding-box;
}

/* 护眼主题 */
[data-theme="eye-protect"] {
  --bg-color: #f0fdf4;
  --header-bg: #dcfce7;
  --text-color: #14532d;
  --border-color: #86efac;
  --panel-bg: #f0fdf4;
  --panel-header-bg: #bbf7d0;
  --button-bg: #ffffff;
  --button-hover-bg: #dcfce7;
  --button-text: #14532d;
  --button-primary-bg: #22c55e;
  --button-primary-hover-bg: #16a34a;
  --button-primary-text: #ffffff;
  --button-secondary-bg: #4ade80;
  --button-secondary-hover-bg: #22c55e;
  --button-secondary-text: #ffffff;
  --input-border: #86efac;
  --input-focus-border: #22c55e;
  --message-user-bg: #22c55e;
  --message-user-text: #ffffff;
  --message-assistant-bg: #dcfce7;
  --message-assistant-text: #14532d;
  --preview-bg: #f0fdf4;
  --editor-bg: #f0fdf4;
  --ai-panel-bg: #f0fdf4;
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* 隐藏页面滚动条 */
  overflow: hidden;
  background-color: var(--bg-color);
  color: var(--text-color);
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

/* 应用主题到各个组件 */
.min-h-screen {
  background-color: var(--bg-color);
}

/* 头部样式 */
header {
  background-color: var(--header-bg) !important;
  border-color: var(--border-color) !important;
}

/* 面板样式 */
.bg-white {
  background-color: var(--panel-bg) !important;
}

.border-gray-200 {
  border-color: var(--border-color) !important;
}

/* 面板头部样式 */
.bg-gray-50 {
  background-color: var(--panel-header-bg) !important;
}

.text-gray-700 {
  color: var(--text-color) !important;
}

/* 按钮样式 */
button {
  background-color: var(--button-bg);
  color: var(--button-text);
  border-color: var(--border-color) !important;
  border-radius: 0.5rem !important; /* 圆角矩形 */
}

button:hover {
  background-color: var(--button-hover-bg);
}

/* 主要按钮样式 */
.bg-blue-600 {
  background-color: var(--button-primary-bg) !important;
  color: var(--button-primary-text) !important;
}

.bg-blue-600:hover {
  background-color: var(--button-primary-hover-bg) !important;
}

/* 次要按钮样式 */
.bg-gray-600 {
  background-color: var(--button-secondary-bg) !important;
  color: var(--button-secondary-text) !important;
}

.bg-gray-600:hover {
  background-color: var(--button-secondary-hover-bg) !important;
}

/* 绿色按钮样式 */
.bg-green-600 {
  background-color: var(--button-secondary-bg) !important;
  color: var(--button-secondary-text) !important;
}

.bg-green-600:hover {
  background-color: var(--button-secondary-hover-bg) !important;
}

/* 白色按钮样式 */
.bg-white {
  background-color: var(--button-bg) !important;
  color: var(--button-text) !important;
  border-color: var(--border-color) !important;
}

.bg-white:hover {
  background-color: var(--button-hover-bg) !important;
}


/* 禁用按钮样式 */
.bg-gray-300 {
  background-color: var(--border-color) !important;
}

.cursor-not-allowed {
  cursor: not-allowed !important;
}

/* 输入框样式 */
input, select, textarea {
  border-color: var(--input-border) !important;
  border-radius: 0.5rem !important; /* 圆角矩形 */
  padding-top: 0.5rem !important; /* 确保顶部内边距一致 */
  padding-bottom: 0.5rem !important; /* 确保底部内边距一致 */
}

/* 图片样式下拉框 */
select {
  appearance: none;
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right 0.5rem center;
  background-size: 1rem;
  padding-right: 2rem !important;
  background-color: var(--button-bg) !important;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  border-radius: 0.5rem !important; /* 确保圆角 */
}

select:hover {
  background-color: var(--button-hover-bg) !important;
  border-color: var(--input-focus-border) !important;
}

select:focus {
  background-color: var(--button-bg) !important;
}

input, select, textarea {
  background-color: var(--button-bg) !important;
}

input:focus, select:focus, textarea:focus {
  border-color: var(--input-focus-border) !important;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2) !important;
  background-color: var(--button-bg) !important;
}

/* 消息样式 */
.bg-blue-500 {
  background-color: var(--message-user-bg) !important;
  color: var(--message-user-text) !important;
}

.bg-gray-100 {
  background-color: var(--message-assistant-bg) !important;
  color: var(--message-assistant-text) !important;
}

/* 预览区和编辑区背景 */
.bg-white.border-r.border-gray-200.overflow-hidden:first-child {
  background-color: var(--preview-bg) !important;
}

.bg-white.border-r.border-gray-200.overflow-hidden:nth-child(2) {
  background-color: var(--editor-bg) !important;
}

.bg-white.overflow-hidden:last-child {
  background-color: var(--ai-panel-bg) !important;
}

/* 编辑区textarea样式 */
.editor-textarea {
  background-color: var(--editor-bg) !important;
  color: var(--text-color) !important;
  overflow-y: auto !important;
  white-space: pre-wrap !important;
}

/* 保持文本选择高亮，即使在失去焦点时 */
.editor-textarea::selection {
  background-color: rgba(59, 130, 246, 0.3) !important;
  color: var(--text-color) !important;
}

.editor-textarea::-moz-selection {
  background-color: rgba(59, 130, 246, 0.3) !important;
  color: var(--text-color) !important;
}

/* 确保在失去焦点时仍然显示选择高亮 */
.editor-textarea:focus::selection {
  background-color: rgba(59, 130, 246, 0.4) !important;
}

.editor-textarea:focus::-moz-selection {
  background-color: rgba(59, 130, 246, 0.4) !important;
}

/* 深色主题下的选择高亮 */
[data-theme="dark"] .editor-textarea::selection {
  background-color: rgba(96, 165, 250, 0.4) !important;
}

[data-theme="dark"] .editor-textarea::-moz-selection {
  background-color: rgba(96, 165, 250, 0.4) !important;
}

[data-theme="dark"] .editor-textarea:focus::selection {
  background-color: rgba(96, 165, 250, 0.5) !important;
}

[data-theme="dark"] .editor-textarea:focus::-moz-selection {
  background-color: rgba(96, 165, 250, 0.5) !important;
}

/* 护眼主题下的选择高亮 */
[data-theme="eye-protect"] .editor-textarea::selection {
  background-color: rgba(34, 197, 94, 0.3) !important;
}

[data-theme="eye-protect"] .editor-textarea::-moz-selection {
  background-color: rgba(34, 197, 94, 0.3) !important;
}

[data-theme="eye-protect"] .editor-textarea:focus::selection {
  background-color: rgba(34, 197, 94, 0.4) !important;
}

[data-theme="eye-protect"] .editor-textarea:focus::-moz-selection {
  background-color: rgba(34, 197, 94, 0.4) !important;
}

/* 文本高亮样式 */
.highlighted-text {
  background-color: yellow !important;
  color: black !important;
}

/* Markdown预览样式 */
.prose {
  line-height: 1.6;
  color: var(--text-color);
}

.prose h1 {
  font-size: 2.25rem;
  font-weight: 700;
  margin-bottom: 1rem;
  color: var(--text-color);
}

.prose h2 {
  font-size: 1.875rem;
  font-weight: 600;
  margin-bottom: 0.75rem;
  color: var(--text-color);
}

.prose h3 {
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: var(--text-color);
}

.prose blockquote {
  border-left: 4px solid var(--border-color);
  padding-left: 1rem;
  font-style: italic;
  color: var(--text-color);
}

.prose code {
  background-color: var(--panel-header-bg);
  padding: 0.125rem 0.25rem;
  border-radius: 0.25rem;
  font-size: 0.875rem;
  color: var(--text-color);
}

.prose pre {
  background-color: var(--panel-header-bg);
  color: var(--text-color);
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
}

.prose pre code {
  background-color: transparent;
  padding: 0;
}

/* 修复列表缩进 */
.prose ul, .prose ol {
  padding-left: 2rem;
}

.prose ul ul, .prose ul ol,
.prose ol ul, .prose ol ol {
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding-left: 2rem;
}

.prose li {
  margin-bottom: 0.25rem;
}

.prose li > p {
  margin: 0;
}

/* 任务列表样式 */
.prose input[type="checkbox"] {
  margin-right: 0.5rem;
}

/* 表格样式 */
.prose table {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0;
}

.prose th, .prose td {
  border: 1px solid var(--border-color);
  padding: 0.5rem;
  text-align: left;
}

.prose th {
  background-color: var(--panel-header-bg);
  font-weight: 600;
}

/* KaTeX公式样式 */
.katex {
  font-size: 1.1em;
  color: var(--text-color);
}

.katex-display {
  margin: 1rem 0;
}

/* 流式响应指示器动画 */
@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.animate-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.delay-75 {
  animation-delay: 0.75s;
}

.delay-150 {
  animation-delay: 1.5s;
}

/* 消息组件样式 */
.message-user {
  background-color: var(--message-user-bg) !important;
  color: var(--message-user-text) !important;
}

.message-assistant {
  background-color: var(--message-assistant-bg) !important;
  color: var(--message-assistant-text) !important;
}

.summary-text {
  color: var(--text-color) !important;
}

.summary-text:hover {
  color: var(--button-primary-hover-bg) !important;
}

.details-bg {
  background-color: var(--panel-header-bg) !important;
}

.details-text {
  color: var(--text-color) !important;
}

.pre-bg {
  background-color: var(--panel-header-bg) !important;
  color: var(--text-color) !important;
}

/* 深色主题下的文本颜色 */
[data-theme="dark"] .text-blue-600 {
  color: #60a5fa !important; /* 深色主题下的蓝色 */
}

[data-theme="dark"] .text-gray-500 {
  color: #94a3b8 !important; /* 深色主题下的灰色 */
}

[data-theme="dark"] .text-gray-600 {
  color: #64748b !important; /* 深色主题下的深灰色 */
}

/* Tree组件样式 */
.tree-string {
  color: #10b981 !important; /* 绿色 */
}

.tree-number {
  color: #3b82f6 !important; /* 蓝色 */
}

.tree-boolean {
  color: #8b5cf6 !important; /* 紫色 */
}

[data-theme="dark"] .tree-string {
  color: #34d399 !important; /* 深色主题下的绿色 */
}

[data-theme="dark"] .tree-number {
  color: #60a5fa !important; /* 深色主题下的蓝色 */
}

[data-theme="dark"] .tree-boolean {
  color: #a78bfa !important; /* 深色主题下的紫色 */
}

/* TreeDemo样式 */
.tree-demo-bg {
  background-color: var(--bg-color) !important;
}

.tree-demo-header {
  color: var(--text-color) !important;
}

.tree-panel {
  background-color: var(--panel-bg) !important;
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06) !important;
}

.tree-panel-header {
  border-color: var(--border-color) !important;
  background-color: var(--panel-header-bg) !important;
}

.tree-pre {
  background-color: var(--panel-header-bg) !important;
  color: var(--text-color) !important;
}

/* 确保所有按钮和输入框都有圆角 */
button, input, select, textarea {
  border-radius: 0.5rem !important;
}

/* 特别针对带有 Tailwind rounded 类的元素 */
.rounded, .rounded-md, .rounded-lg, .rounded-xl, .rounded-2xl, .rounded-3xl {
  border-radius: 0.5rem !important;
}

/* 特别针对没有圆角的元素 */
.rounded-none {
  border-radius: 0.5rem !important;
}

/* 特别针对下拉框的圆角 */
select {
  border-radius: 0.5rem !important;
}

/* 自定义下拉框样式 */
.custom-select {
  border-radius: 0.5rem !important;
  /* 确保有足够的右内边距来容纳自定义箭头 */
  padding-right: 2rem !important;
}
